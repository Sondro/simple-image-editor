!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,i){"use strict";function n(e,t){var i=new Image;i.onload=function(){t&&t(i)},i.src=e}function r(e,t){var i=new FileReader;i.onload=function(){t&&t(this.result)},i.readAsDataURL(e)}function o(e){var t=e.split("?")[0].match(/\.(png|jpeg|jpg)$/);return/^(data:\s*image\/(\w+);base64,)/.test(e)?e.split(",")[0].split(":")[1].split(";")[0]:t?"image/"+t[1]:"image/jpeg"}function a(e){for(var t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),r=new Uint8Array(n),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return new Blob([n],{type:i})}function s(e){var t=document.createElement("canvas");this.cvs=t,this.ctx=t.getContext("2d"),this.source=e,this.img={element:null,width:0,height:0,angle:0,type:"image/jpeg"},this.ready()}window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL&&window.webkitURL;s.prototype.ready=function(e){e=e||function(){};var t=this,i=t.source;if(t.img.element)return e(t.img.element);i?i.tagName&&"IMG"==i.tagName.toLocaleLowerCase()?n(i.src,function(n){t.img.element=n,t.img.type=o(i.src),e(n)}):/^(data:\s*image\/(\w+);base64,)/.test(i)||/^[a-z]+:\/\//.test(i)?n(i,function(n){t.img.element=n,t.img.type=o(i),e(n)}):i instanceof File||i instanceof Blob?r(i,function(r){n(r,function(n){t.img.element=n,t.img.type=i.type,e(n)})}):e(null):e(null)},s.prototype.width=function(e){return"number"==typeof e&&0<e&&(this.img.width=e),this},s.prototype.height=function(e){return"number"==typeof e&&0<e&&(this.img.height=e),this},s.prototype.rotate=function(e){return"number"==typeof e&&(this.img.angle=e),this},s.prototype.toDataURL=function(e,t){var i=this;return"number"==typeof e&&(t=e,e=""),new Promise(function(n,r){i.ready(function(o){if(o){var s=i.img.width||o.width,c=i.img.height||s*o.height/o.width,u=i.img.angle,l=i.cvs,h=i.ctx;e=e||i.type,t=t||.8;try{if(0==u)l.width=s,l.height=c,h.clearRect(0,0,l.width,l.height),h.drawImage(o,0,0,s,c);else{l.width=s,l.height=c,h.save();var g={x:l.width/2,y:l.height/2};h.translate(g.x,g.y),h.rotate(u*Math.PI/180),h.translate(-s/2,-c/2),h.drawImage(o,0,0,s,c),h.restore()}var p=l.toDataURL(e,t);n({base64:p,blob:a(p)})}catch(e){r("图片导出失败")}}else r("图片不存在")})})},s.prototype.saveFile=function(e){var t=this;return new Promise(function(i,n){t.toDataURL().then(function(t){var r=t.base64,o=t.blob;try{var a=document.createElement("a");a.download=e,a.href=r,a.click(),i(o)}catch(e){n("保存失败")}},n)})},window.sie=function(e){return new s(e)},window.sie.version={name:"simple-image-editor",version:"1.0.0",description:"",main:"index.js",scripts:{dev:"webpack --watch"},keywords:["image-editor"],repository:{type:"git",url:"git+https://github.com/cqjsqh/image-editor.git"},author:"cqjsqh",license:"ISC",bugs:{url:"https://github.com/cqjsqh/image-editor/issues"},homepage:"https://github.com/cqjsqh/image-editor#readme",devDependencies:{"babel-core":"^6.25.0","babel-loader":"^7.1.1","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1","babel-preset-stage-0":"^6.24.1",ora:"^1.3.0",shelljs:"^0.7.8",webpack:"^3.4.1"}}.version,e.exports=window.sie}]);